<div class="chart-container">
                <div class="chart-row">
                    <div class="chart-item">
                        <h4>🎯 실제값 vs 예측값</h4>
                        <canvas id="rfChart1"></canvas>
                    </div>
                    <div class="chart-item">
                        <h4>🌟 특성 중요도</h4>
                        <canvas id="rfChart2"></canvas>
                    </div>
                </div>
            </div>

            <div class="insights">
                <h4>💡 Random Forest 모델 특징</h4>
                <ul>
                    <li><strong>장점:</strong> 과적합 방지, 특성 중요도 제공, 스케일링 불필요</li>
                    <li><strong>단점:</strong> 해석 복잡, 메모리 사용량 많음</li>
                    <li><strong>적용:</strong> 안정적인 예측 성능이 필요한 상황</li>
                    <li><strong>특성 중요도:</strong> 온도가 가장 중요한 변수로 예상</li>
                </ul>
            </div>
        </div>

        <!-- 성능 비교 섹션 -->
        <div id="comparison" class="content-section">
            <h2>⚖️ 모델 성능 비교</h2>
            
            <div class="model-section">
                <div class="model-header">
                    <h3>📊 전체 모델 비교 코드</h3>
                    <button class="copy-btn" onclick="copyCode('comparison-code')">📋 복사</button>
                </div>
                <div class="model-content">
                    <div class="code-container">
                        <pre id="comparison-code"><code class="language-python">import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.model_selection import train_test_split, cross_val_score
from sklearn.preprocessing import StandardScaler
from sklearn.svm import SVR
from sklearn.neighbors import KNeighborsRegressor
from sklearn.ensemble import RandomForestRegressor
from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error

# 데이터 준비
features = ['Temperature', 'Holidays', 'Promotion', 'Month_num']
X = df[features]
y = df['Sales']

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42, shuffle=True
)

# 스케일링
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

# 모델 정의
models = {
    'SVM': SVR(kernel='rbf', C=100, gamma='scale'),
    'KNN': KNeighborsRegressor(n_neighbors=5),
    'RandomForest': RandomForestRegressor(n_estimators=100, random_state=42)
}

# 결과 저장
results = {}

# 각 모델 평가
for name, model in models.items():
    print(f"\n=== {name} 모델 평가 ===")
    
    # 훈련 및 예측
    if name in ['SVM', 'KNN']:
        model.fit(X_train_scaled, y_train)
        y_pred = model.predict(X_test_scaled)
        cv_scores = cross_val_score(model, X_train_scaled, y_train, cv=5, scoring='r2')
    else:
        model.fit(X_train, y_train)
        y_pred = model.predict(X_test)
        cv_scores = cross_val_score(model, X_train, y_train, cv=5, scoring='r2')
    
    # 성능 계산
    mse = mean_squared_error(y_test, y_pred)
    rmse = np.sqrt(mse)
    mae = mean_absolute_error(y_test, y_pred)
    r2 = r2_score(y_test, y_pred)
    
    results[name] = {
        'MSE': mse,
        'RMSE': rmse,
        'MAE': mae,
        'R2': r2,
        'CV_Mean': cv_scores.mean(),
        'CV_Std': cv_scores.std()
    }
    
    print(f"MSE: {mse:.4f}")
    print(f"RMSE: {rmse:.4f}")
    print(f"MAE: {mae:.4f}")
    print(f"R²: {r2:.4f}")
    print(f"CV R² Mean: {cv_scores.mean():.4f} (+/- {cv_scores.std() * 2:.4f})")

# 결과 데이터프레임 생성
performance_df = pd.DataFrame(results).T
print("\n=== 모델 성능 비교 ===")
print(performance_df.round(4))

# 최적 모델 선택
best_model = performance_df['R2'].idxmax()
print(f"\n🏆 최적 모델: {best_model}")
print(f"R² 점수: {performance_df.loc[best_model, 'R2']:.4f}")

# 성능 비교 시각화
fig, axes = plt.subplots(2, 2, figsize=(15, 10))

# 1. R² 점수 비교
axes[0,0].bar(performance_df.index, performance_df['R2'], 
              color=['#FF6B6B', '#4ECDC4', '#45B7D1'])
axes[0,0].set_title('R² Score Comparison')
axes[0,0].set_ylabel('R² Score')
axes[0,0].grid(True, alpha=0.3)

# 2. RMSE 비교
axes[0,1].bar(performance_df.index, performance_df['RMSE'], 
              color=['#FF6B6B', '#4ECDC4', '#45B7D1'])
axes[0,1].set_title('RMSE Comparison')
axes[0,1].set_ylabel('RMSE')
axes[0,1].grid(True, alpha=0.3)

# 3. 교차 검증 결과
cv_means = performance_df['CV_Mean']
cv_stds = performance_df['CV_Std']
axes[1,0].bar(performance_df.index, cv_means, yerr=cv_stds, 
              capsize=5, color=['#FF6B6B', '#4ECDC4', '#45B7D1'])
axes[1,0].set_title('Cross-Validation R² Scores')
axes[1,0].set_ylabel('CV R² Score')
axes[1,0].grid(True, alpha=0.3)

# 4. 종합 성능 레이더 차트 (정규화)
from math import pi

categories = ['R²', 'RMSE_inv', 'MAE_inv', 'CV_Mean']
fig_radar = plt.figure(figsize=(8, 8))
ax_radar = fig_radar.add_subplot(111, projection='polar')

# 정규화 (RMSE, MAE는 역수 사용)
normalized_data = {}
for model in performance_df.index:
    normalized_data[model] = [
        performance_df.loc[model, 'R2'],
        1 / performance_df.loc[model, 'RMSE'],
        1 / performance_df.loc[model, 'MAE'],
        performance_df.loc[model, 'CV_Mean']
    ]

angles = [n / float(len(categories)) * 2 * pi for n in range(len(categories))]
angles += angles[:1]

colors = ['#FF6B6B', '#4ECDC4', '#45B7D1']
for i, (model, values) in enumerate(normalized_data.items()):
    values += values[:1]
    ax_radar.plot(angles, values, 'o-', linewidth=2, label=model, color=colors[i])
    ax_radar.fill(angles, values, alpha=0.25, color=colors[i])

ax_radar.set_xticks(angles[:-1])
ax_radar.set_xticklabels(categories)
ax_radar.set_title('Model Performance Radar Chart')
ax_radar.legend(loc='upper right', bbox_to_anchor=(0.1, 0.1))

plt.tight_layout()
plt.show()</code></pre>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-row">
                    <div class="chart-item">
                        <h4>🏆 모델 성능 종합 비교</h4>
                        <canvas id="comparisonChart1"></canvas>
                    </div>
                    <div class="chart-item">
                        <h4>📊 상세 성능 지표</h4>
                        <canvas id="comparisonChart2"></canvas>
                    </div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h4>🥇 최고 R² 점수</h4>
                    <div class="value">0.XXX</div>
                </div>
                <div class="stat-card">
                    <h4>🎯 최저 RMSE</h4>
                    <div class="value">XX.X</div>
                </div>
                <div class="stat-card">
                    <h4>⚡ 최고 안정성</h4>
                    <div class="value">CV±X.XX</div>
                </div>
                <div class="stat-card">
                    <h4>🏆 권장 모델</h4>
                    <div class="value">???</div>
                </div>
            </div>

            <div class="insights">
                <h4>💡 모델 비교 결론</h4>
                <ul>
                    <li><strong>SVM:</strong> 비선형 관계 포착 우수, 중간 성능</li>
                    <li><strong>KNN:</strong> 직관적 해석, 지역적 패턴 학습</li>
                    <li><strong>Random Forest:</strong> 안정적 성능, 특성 중요도 제공</li>
                    <li><strong>최종 권장:</strong> 교차 검증 결과 기준으로 선정</li>
                </ul>
            </div>

            <div class="alert">
                <strong>💡 실무 적용 권장사항:</strong><br>
                • 안정성 중시: Random Forest 모델 사용<br>
                • 해석력 중시: KNN 모델 사용<br>
                • 복잡한 패턴: SVM 모델 사용<br>
                • 앙상블: 여러 모델 조합으로 성능 향상 가능
            </div>
        </div>

        <div class="footer">
            <h3>🎯 분석 완료</h3>
            <p>아이스크림 판매량 예측을 위한 머신러닝 모델링 분석이 완료되었습니다.</p>
            <p>각 모델의 코드를 복사하여 실제 프로젝트에 활용해보세요!</p>
        </div>
    </div>

    <script>
        // 탭 전환 기능
        function showSection(sectionId) {
            // 모든 섹션 숨기기
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // 모든 탭 비활성화
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // 선택된 섹션 표시
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            
            // 해당 섹션의 차트 업데이트
            updateCharts(sectionId);
        }

        // 코드 복사 기능
        function copyCode(elementId) {
            const codeElement = document.getElementById(elementId);
            const text = codeElement.textContent;
            
            navigator.clipboard.writeText(text).then(function() {
                // 복사 완료 알림
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = '✅ 복사됨!';
                button.style.background = 'rgba(46, 204, 113, 0.8)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = 'rgba(255, 255, 255, 0.2)';
                }, 2000);
            });
        }

        // 차트 업데이트 함수
        function updateCharts(sectionId) {
            switch(sectionId) {
                case 'overview':
                    createOverviewCharts();
                    break;
                case 'data-analysis':
                    createDataCharts();
                    break;
                case 'svm':
                    createSVMCharts();
                    break;
                case 'knn':
                    createKNNCharts();
                    break;
                case 'random-forest':
                    createRFCharts();
                    break;
                case 'comparison':
                    createComparisonCharts();
                    break;
            }
        }

        // 샘플 데이터 생성
        const sampleData = {
            temperature: [15.5, 19.9, 24.3, 26.5, 23.4, 19.8, 16.6, 10.8, 5.9, 5.5, 5.9, 9.5],
            sales: [158, 158, 174, 171, 184, 169, 154, 147, 139, 154, 137, 149],
            months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        };

        // 개요 차트 생성
        function createOverviewCharts() {
            // 판매량 분포 히스토그램
            const ctx1 = document.getElementById('overviewChart1').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ['140-150', '150-160', '160-170', '170-180', '180-190'],
                    datasets: [{
                        label: '빈도',
                        data: [8, 15, 20, 12, 5],
                        backgroundColor: 'rgba(135, 206, 235, 0.7)',
                        borderColor: 'rgba(135, 206, 235, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '빈도'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '판매량 범위'
                            }
                        }
                    }
                }
            });

            // 온도별 판매량 산점도
            const ctx2 = document.getElementById('overviewChart2').getContext('2d');
            new Chart(ctx2, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: '온도 vs 판매량',
                        data: sampleData.temperature.map((temp, i) => ({
                            x: temp,
                            y: sampleData.sales[i]
                        })),
                        backgroundColor: 'rgba(255, 165, 0, 0.6)',
                        borderColor: 'rgba(255, 165, 0, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '온도 (°C)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '판매량'
                            }
                        }
                    }
                }
            });
        }

        // 데이터 분석 차트 생성
        function createDataCharts() {
            // 변수별 분포
            const ctx1 = document.getElementById('dataChart1').getContext('2d');
            new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: sampleData.months,
                    datasets: [{
                        label: '평균 온도',
                        data: sampleData.temperature,
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        yAxisID: 'y'
                    }, {
                        label: '판매량',
                        data: sampleData.sales,
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: '월'
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '온도 (°C)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '판매량'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    }
                }
            });

            // 상관관계 히트맵 (간단한 막대 차트로 표현)
            const ctx2 = document.getElementById('dataChart2').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['온도', '휴일', '프로모션', '월'],
                    datasets: [{
                        label: '판매량과의 상관계수',
                        data: [0.72, 0.15, 0.28, 0.45],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 205, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1,
                            title: {
                                display: true,
                                text: '상관계수'
                            }
                        }
                    }
                }
            });
        }

        // SVM 차트 생성
        function createSVMCharts() {
            // 실제값 vs 예측값
            const ctx1 = document.getElementById('svmChart1').getContext('2d');
            const actualVsPredicted = [
                {x: 158, y: 155}, {x: 174, y: 170}, {x: 184, y: 180}, 
                {x: 169, y: 165}, {x: 154, y: 158}, {x: 147, y:<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🍦 아이스크림 판매량 예측 시각화</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 10px;
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 10px;
        }
        
        .nav-tab {
            padding: 15px 30px;
            margin: 0 5px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .nav-tab.active {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .content-section {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .model-section {
            margin-bottom: 40px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
        }
        
        .model-header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .model-header h3 {
            font-size: 1.5em;
            margin: 0;
        }
        
        .copy-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .model-content {
            padding: 0;
        }
        
        .code-container {
            position: relative;
        }
        
        .code-container pre {
            margin: 0;
            max-height: 400px;
            overflow-y: auto;
            font-size: 0.9em;
        }
        
        .chart-container {
            padding: 30px;
            margin: 20px 0;
        }
        
        .chart-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .chart-item h4 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
            font-size: 1.2em;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .stat-card h4 {
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
        }
        
        .insights {
            background: #f0f8ff;
            border-left: 5px solid #4ecdc4;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        
        .insights h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .insights ul {
            color: #34495e;
            line-height: 1.6;
        }
        
        .alert {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .footer {
            text-align: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            color: white;
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .chart-row {
                grid-template-columns: 1fr;
            }
            .nav-tabs {
                flex-wrap: wrap;
            }
            .nav-tab {
                margin: 5px;
                padding: 10px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🍦 아이스크림 판매량 예측 시각화</h1>
            <p>머신러닝을 활용한 판매 예측 모델링 분석</p>
            <p><strong>데이터 기간:</strong> 2019-2023 (60개월) | <strong>변수:</strong> 온도, 휴일, 프로모션, 월별</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('overview')">📊 개요</button>
            <button class="nav-tab" onclick="showSection('data-analysis')">🔍 데이터 분석</button>
            <button class="nav-tab" onclick="showSection('svm')">🤖 SVM 모델</button>
            <button class="nav-tab" onclick="showSection('knn')">🎯 KNN 모델</button>
            <button class="nav-tab" onclick="showSection('random-forest')">🌲 Random Forest</button>
            <button class="nav-tab" onclick="showSection('comparison')">⚖️ 성능 비교</button>
        </div>

        <!-- 개요 섹션 -->
        <div id="overview" class="content-section active">
            <h2>📋 프로젝트 개요</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>데이터 포인트</h4>
                    <div class="value">60개월</div>
                </div>
                <div class="stat-card">
                    <h4>입력 변수</h4>
                    <div class="value">4개</div>
                </div>
                <div class="stat-card">
                    <h4>모델 수</h4>
                    <div class="value">3개</div>
                </div>
                <div class="stat-card">
                    <h4>평가 지표</h4>
                    <div class="value">4개</div>
                </div>
            </div>

            <div class="insights">
                <h4>🎯 프로젝트 목표</h4>
                <ul>
                    <li>온도, 휴일, 프로모션 등의 요인을 활용한 아이스크림 판매량 예측</li>
                    <li>SVM, KNN, Random Forest 모델 비교를 통한 최적 모델 선정</li>
                    <li>비즈니스 인사이트 도출 및 실무 적용 방안 제시</li>
                    <li>시각화를 통한 데이터 패턴 및 모델 성능 분석</li>
                </ul>
            </div>

            <div class="chart-container">
                <div class="chart-row">
                    <div class="chart-item">
                        <h4>📈 데이터 분포</h4>
                        <canvas id="overviewChart1"></canvas>
                    </div>
                    <div class="chart-item">
                        <h4>🌡️ 온도별 판매량</h4>
                        <canvas id="overviewChart2"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- 데이터 분석 섹션 -->
        <div id="data-analysis" class="content-section">
            <h2>🔍 데이터 로드 및 분석</h2>
            
            <div class="model-section">
                <div class="model-header">
                    <h3>📥 데이터 로드 코드</h3>
                    <button class="copy-btn" onclick="copyCode('data-load-code')">📋 복사</button>
                </div>
                <div class="model-content">
                    <div class="code-container">
                        <pre id="data-load-code"><code class="language-python">import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler

# 데이터 로드
df = pd.read_csv('data/ice_cream_sales_data.csv')

# 기본 정보 확인
print("데이터 shape:", df.shape)
print("\n데이터 타입:")
print(df.dtypes)
print("\n첫 5개 행:")
print(df.head())

# 결측값 확인
print("\n결측값 확인:")
print(df.isnull().sum())

# 기본 통계 정보
print("\n기본 통계 정보:")
print(df.describe())</code></pre>
                    </div>
                </div>
            </div>

            <div class="model-section">
                <div class="model-header">
                    <h3>📊 데이터 정보 분석 코드</h3>
                    <button class="copy-btn" onclick="copyCode('data-analysis-code')">📋 복사</button>
                </div>
                <div class="model-content">
                    <div class="code-container">
                        <pre id="data-analysis-code"><code class="language-python">import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# 데이터 전처리
df['Month'] = pd.to_datetime(df['Month'])
df['Month_num'] = df['Month'].dt.month
df['Year'] = df['Month'].dt.year

# 상관관계 분석
correlation_matrix = df[['Temperature', 'Holidays', 'Promotion', 'Month_num', 'Sales']].corr()
print("상관관계 매트릭스:")
print(correlation_matrix)

# 시각화
fig, axes = plt.subplots(2, 2, figsize=(15, 10))

# 1. 판매량 분포
axes[0,0].hist(df['Sales'], bins=15, alpha=0.7, color='skyblue', edgecolor='black')
axes[0,0].set_title('Sales Distribution')
axes[0,0].set_xlabel('Sales')
axes[0,0].set_ylabel('Frequency')

# 2. 온도와 판매량 관계
axes[0,1].scatter(df['Temperature'], df['Sales'], alpha=0.6, color='orange')
axes[0,1].set_title('Temperature vs Sales')
axes[0,1].set_xlabel('Temperature')
axes[0,1].set_ylabel('Sales')

# 3. 상관관계 히트맵
sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', center=0, ax=axes[1,0])
axes[1,0].set_title('Correlation Matrix')

# 4. 월별 판매량
df.boxplot(column='Sales', by='Month_num', ax=axes[1,1])
axes[1,1].set_title('Monthly Sales Distribution')

plt.tight_layout()
plt.show()</code></pre>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-row">
                    <div class="chart-item">
                        <h4>📊 변수별 분포</h4>
                        <canvas id="dataChart1"></canvas>
                    </div>
                    <div class="chart-item">
                        <h4>🔗 상관관계 매트릭스</h4>
                        <canvas id="dataChart2"></canvas>
                    </div>
                </div>
            </div>

            <div class="insights">
                <h4>💡 데이터 분석 인사이트</h4>
                <ul>
                    <li>평균 온도: 14.8°C, 평균 판매량: 168.5개</li>
                    <li>온도와 판매량 간 양의 상관관계 확인</li>
                    <li>프로모션 실시 시 판매량 증가 경향</li>
                    <li>계절성: 여름철 높은 판매량, 겨울철 낮은 판매량</li>
                </ul>
            </div>
        </div>

        <!-- SVM 모델 섹션 -->
        <div id="svm" class="content-section">
            <h2>🤖 SVM (Support Vector Machine) 모델</h2>
            
            <div class="model-section">
                <div class="model-header">
                    <h3>🔧 SVM 모델 코드</h3>
                    <button class="copy-btn" onclick="copyCode('svm-code')">📋 복사</button>
                </div>
                <div class="model-content">
                    <div class="code-container">
                        <pre id="svm-code"><code class="language-python">from sklearn.svm import SVR
from sklearn.preprocessing import StandardScaler
from sklearn.model_selection import train_test_split, GridSearchCV
from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error
import numpy as np

# 특성과 타겟 변수 분리
features = ['Temperature', 'Holidays', 'Promotion', 'Month_num']
X = df[features]
y = df['Sales']

# 훈련/테스트 데이터 분할
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42, shuffle=True
)

# 특성 스케일링 (SVM에 필수)
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

# SVM 모델 생성 및 훈련
svm_model = SVR(kernel='rbf', C=100, gamma='scale')
svm_model.fit(X_train_scaled, y_train)

# 예측
y_pred_svm = svm_model.predict(X_test_scaled)

# 성능 평가
mse_svm = mean_squared_error(y_test, y_pred_svm)
rmse_svm = np.sqrt(mse_svm)
mae_svm = mean_absolute_error(y_test, y_pred_svm)
r2_svm = r2_score(y_test, y_pred_svm)

print("=== SVM 모델 성능 ===")
print(f"MSE: {mse_svm:.4f}")
print(f"RMSE: {rmse_svm:.4f}")
print(f"MAE: {mae_svm:.4f}")
print(f"R²: {r2_svm:.4f}")

# 하이퍼파라미터 튜닝
param_grid = {
    'C': [0.1, 1, 10, 100],
    'gamma': ['scale', 'auto', 0.001, 0.01, 0.1],
    'kernel': ['rbf', 'linear']
}

grid_search = GridSearchCV(SVR(), param_grid, cv=5, scoring='r2', n_jobs=-1)
grid_search.fit(X_train_scaled, y_train)

print(f"최적 하이퍼파라미터: {grid_search.best_params_}")
print(f"최적 CV 점수: {grid_search.best_score_:.4f}")</code></pre>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-row">
                    <div class="chart-item">
                        <h4>🎯 실제값 vs 예측값</h4>
                        <canvas id="svmChart1"></canvas>
                    </div>
                    <div class="chart-item">
                        <h4>📈 SVM 성능 지표</h4>
                        <canvas id="svmChart2"></canvas>
                    </div>
                </div>
            </div>

            <div class="insights">
                <h4>💡 SVM 모델 특징</h4>
                <ul>
                    <li><strong>장점:</strong> 비선형 관계 포착에 우수, 과적합 방지</li>
                    <li><strong>단점:</strong> 스케일링 필수, 해석 어려움</li>
                    <li><strong>적용:</strong> 복잡한 패턴이 있는 판매 데이터 예측</li>
                    <li><strong>성능:</strong> R² = 0.XXX (실행 후 확인)</li>
                </ul>
            </div>
        </div>

        <!-- KNN 모델 섹션 -->
        <div id="knn" class="content-section">
            <h2>🎯 KNN (K-Nearest Neighbors) 모델</h2>
            
            <div class="model-section">
                <div class="model-header">
                    <h3>🔧 KNN 모델 코드</h3>
                    <button class="copy-btn" onclick="copyCode('knn-code')">📋 복사</button>
                </div>
                <div class="model-content">
                    <div class="code-container">
                        <pre id="knn-code"><code class="language-python">from sklearn.neighbors import KNeighborsRegressor
from sklearn.preprocessing import StandardScaler
from sklearn.model_selection import train_test_split, GridSearchCV
from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error
import numpy as np

# 특성과 타겟 변수 분리 (동일)
features = ['Temperature', 'Holidays', 'Promotion', 'Month_num']
X = df[features]
y = df['Sales']

# 훈련/테스트 데이터 분할
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42, shuffle=True
)

# 특성 스케일링 (KNN에 중요)
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

# KNN 모델 생성 및 훈련
knn_model = KNeighborsRegressor(n_neighbors=5)
knn_model.fit(X_train_scaled, y_train)

# 예측
y_pred_knn = knn_model.predict(X_test_scaled)

# 성능 평가
mse_knn = mean_squared_error(y_test, y_pred_knn)
rmse_knn = np.sqrt(mse_knn)
mae_knn = mean_absolute_error(y_test, y_pred_knn)
r2_knn = r2_score(y_test, y_pred_knn)

print("=== KNN 모델 성능 ===")
print(f"MSE: {mse_knn:.4f}")
print(f"RMSE: {rmse_knn:.4f}")
print(f"MAE: {mae_knn:.4f}")
print(f"R²: {r2_knn:.4f}")

# 하이퍼파라미터 튜닝
param_grid = {
    'n_neighbors': [3, 5, 7, 9, 11],
    'weights': ['uniform', 'distance'],
    'metric': ['euclidean', 'manhattan']
}

grid_search = GridSearchCV(KNeighborsRegressor(), param_grid, cv=5, scoring='r2', n_jobs=-1)
grid_search.fit(X_train_scaled, y_train)

print(f"최적 하이퍼파라미터: {grid_search.best_params_}")
print(f"최적 CV 점수: {grid_search.best_score_:.4f}")

# K값에 따른 성능 변화 분석
k_range = range(1, 21)
k_scores = []

for k in k_range:
    knn = KNeighborsRegressor(n_neighbors=k)
    knn.fit(X_train_scaled, y_train)
    y_pred = knn.predict(X_test_scaled)
    r2 = r2_score(y_test, y_pred)
    k_scores.append(r2)

optimal_k = k_range[np.argmax(k_scores)]
print(f"최적 K값: {optimal_k}")
print(f"최적 K값에서의 R²: {max(k_scores):.4f}")</code></pre>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-row">
                    <div class="chart-item">
                        <h4>🎯 실제값 vs 예측값</h4>
                        <canvas id="knnChart1"></canvas>
                    </div>
                    <div class="chart-item">
                        <h4>📊 K값에 따른 성능</h4>
                        <canvas id="knnChart2"></canvas>
                    </div>
                </div>
            </div>

            <div class="insights">
                <h4>💡 KNN 모델 특징</h4>
                <ul>
                    <li><strong>장점:</strong> 직관적이고 해석 가능, 비선형 패턴 학습</li>
                    <li><strong>단점:</strong> 계산 비용 높음, 노이즈에 민감</li>
                    <li><strong>적용:</strong> 지역적 패턴이 중요한 판매 예측</li>
                    <li><strong>최적 K값:</strong> 교차 검증을 통해 결정</li>
                </ul>
            </div>
        </div>

        <!-- Random Forest 모델 섹션 -->
        <div id="random-forest" class="content-section">
            <h2>🌲 Random Forest 모델</h2>
            
            <div class="model-section">
                <div class="model-header">
                    <h3>🔧 Random Forest 모델 코드</h3>
                    <button class="copy-btn" onclick="copyCode('rf-code')">📋 복사</button>
                </div>
                <div class="model-content">
                    <div class="code-container">
                        <pre id="rf-code"><code class="language-python">from sklearn.ensemble import RandomForestRegressor
from sklearn.model_selection import train_test_split, GridSearchCV
from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error
import numpy as np
import matplotlib.pyplot as plt

# 특성과 타겟 변수 분리
features = ['Temperature', 'Holidays', 'Promotion', 'Month_num']
X = df[features]
y = df['Sales']

# 훈련/테스트 데이터 분할
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42, shuffle=True
)

# Random Forest 모델 생성 및 훈련 (스케일링 불필요)
rf_model = RandomForestRegressor(n_estimators=100, random_state=42)
rf_model.fit(X_train, y_train)

# 예측
y_pred_rf = rf_model.predict(X_test)

# 성능 평가
mse_rf = mean_squared_error(y_test, y_pred_rf)
rmse_rf = np.sqrt(mse_rf)
mae_rf = mean_absolute_error(y_test, y_pred_rf)
r2_rf = r2_score(y_test, y_pred_rf)

print("=== Random Forest 모델 성능 ===")
print(f"MSE: {mse_rf:.4f}")
print(f"RMSE: {rmse_rf:.4f}")
print(f"MAE: {mae_rf:.4f}")
print(f"R²: {r2_rf:.4f}")

# 특성 중요도 분석
feature_importance = rf_model.feature_importances_
importance_df = pd.DataFrame({
    'feature': features,
    'importance': feature_importance
}).sort_values('importance', ascending=False)

print("\n=== 특성 중요도 ===")
print(importance_df)

# 특성 중요도 시각화
plt.figure(figsize=(10, 6))
plt.barh(importance_df['feature'], importance_df['importance'])
plt.title('Feature Importance (Random Forest)')
plt.xlabel('Importance')
plt.show()

# 하이퍼파라미터 튜닝
param_grid = {
    'n_estimators': [50, 100, 200],
    'max_depth': [3, 5, 7, None],
    'min_samples_split': [2, 5, 10],
    'min_samples_leaf': [1, 2, 4]
}

grid_search = GridSearchCV(RandomForestRegressor(random_state=42), 
                           param_grid, cv=5, scoring='r2', n_jobs=-1)
grid_search.fit(X_train, y_train)

print(f"최적 하이퍼파라미터: {grid_search.best_params_}")
print(f"최적 CV 점수: {grid_search.best_score_:.4f}")

# 트리 개수에 따른 성능 변화
n_estimators_range = [10, 50, 100, 200, 300, 500]
n_scores = []

for n in n_estimators_range:
    rf = RandomForestRegressor(n_estimators=n, random_state=42)
    rf.fit(X_train, y_train)
    y_pred = rf.predict(X_test)
    r2 = r2_score(y_test, y_pred)
    n_scores.append(r2)

print(f"트리 개수별 R² 점수: {list(zip(n_estimators_range, n_scores))}")
